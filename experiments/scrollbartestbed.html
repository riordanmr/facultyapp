<html>
<!-- Testbed web page to experiment with manually-drawn scrollbars. 
  Mark Riordan  06-FEB-2024 -->
<!-- appearance of scrollbar from https://codepen.io/ashblue/pen/AYMKge -->
<head>
<style>
/* @import "compass/css3"; */

h1 {
  font-size: 20px;
  margin: 5px 5px 10px;
}

input[type="number"], li {
  display: block;
  margin-bottom: 10px;
}

form {
  margin: 5px;
}

canvas {
  padding: 20px;
}
</style>
</head>
<body>
<h1>Canvas Scrollbar Test</h1>
<form>
  <ul>
    <li>
      <input type="radio" name="direction" id="vertical" value="vertical" checked />
      <label for="vertical">Vertical</label>
      <input type="radio" name="direction" id="horizontal" value="horizontal" />
      <label for="horizontal">Horizontal</label>
    </li>

    <li>
      <label for="width">Width</label>
      <input type="number" id="width" value="15" />
    </li>
    <li>
      <label for="height">Height</label>
      <input id="height" type="number" value="200" />
    </li>
    <li>
      <label for="scrollbar">Scrollbar Size</label>
      <input id="scrollbar" type="number" value="15" />
    </li>
    <li>
      <label for="max">Max Value</label>
      <input id="max" type="number" value="100" />
    </li>
    <li>
      <label for="val">Value</label>
      <input id="val" type="number" value="20" />
    </li>
    <li>
      <input id="submit" type="submit" />
    </li>
  </ul>
</form>

<canvas id="canvas" width="50" height="300"><canvas>

<script>
var canvas = document.getElementById('canvas'),
    ctx = canvas.getContext('2d');
                             
function drawScrollbar () {
  var width = parseInt(document.getElementById('width').value),
    height = parseInt(document.getElementById('height').value),
    scrollbarSize = parseInt(document.getElementById('scrollbar').value),
    max = parseInt(document.getElementById('max').value),
    val = Math.min(Math.max(parseInt(parseInt(document.getElementById('val').value)), 0), max),
    isVertical = document.getElementById('vertical').checked;

  direction = isVertical ? 'vertical' : 'horizontal';  
  
  // Draw the scrollbar itself. 
  ctx.fillStyle = '#d9d9d9';  // Used color picker to get this color from original applet.
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  ctx.fillRect(0, 0, width, height);
  //console.log(width);

  // Draw the scrollbar slider.
  ctx.fillStyle = '#aeaeae';  // Used color picker to get this color from original applet.
  if (direction === 'vertical') {
    var scrollbarPosition = ((height - scrollbarSize) / max) * val;
    ctx.fillRect(0, scrollbarPosition, width, scrollbarSize);
  } else {
    var scrollbarPosition = ((width - scrollbarSize) / max) * val;
    ctx.fillRect(scrollbarPosition, 0, scrollbarSize, height);
  }
}

drawScrollbar();

document.getElementById('submit').addEventListener('click', function (e) {
  e.preventDefault();
  drawScrollbar();
});

document.getElementById("canvas").addEventListener("click", function(e) {
  console.log("canvas here with event " + e + " with clientx " + e.clientX + " and clienty " + e.clientY);
});
</script>
</body>
</html>
