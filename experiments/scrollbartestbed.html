<html>
<!-- Testbed web page to experiment with manually-drawn scrollbars. 
  Mark Riordan  06-FEB-2024 -->
<!-- appearance of scrollbar from https://codepen.io/ashblue/pen/AYMKge -->
<head>
<style>
/* @import "compass/css3"; */

h1 {
  font-family: sans-serif;
  font-size: 20px;
  margin: 5px 5px 10px;
}

input[type="number"], li {
  display: block;
  margin-bottom: 10px;
}

#canvasMain {
  padding: 0px;
  margin: 0px;
}

#scrollbarvert {
  padding: 0px;
  margin: 0px;
}

.tablenopadding {
  border-spacing: 0;
  border-collapse: collapse;
}
.cellnopadding {
  padding: 0 !important;
  margin: 0 !important;
}

</style>
</head>
<body>
<h1>Canvas Scrollbar Test</h1>

<table class="tablenopadding">
  <tr>
    <td class="cellnopadding"><canvas id="canvasMain" width="300" height="300"></canvas></td>
    <td class="cellnopadding"><canvas id="scrollbarvert" width="15" height="300"></canvas></td>
  </tr>
</table>

<script>

  // Convert red, green, blue integers to an HTML color code.
  function rgb(r, g, b) {
    const toHex = n => n.toString(16).padStart(2, '0');
    return '#' + toHex(r) + toHex(g) + toHex(b);
  }

var canvasScrollbar = document.getElementById('scrollbarvert'),
    ctxScrollbar = canvasScrollbar.getContext('2d');
var canvasMain = document.getElementById('canvasMain'),
    ctxMain = canvasMain.getContext('2d');
                             
function drawScrollbar () {
  var rectScrollbar = canvasScrollbar.getBoundingClientRect();
  var width = canvasScrollbar.width,
    height = canvasScrollbar.height,
    scrollbarSize = width,
    max = 25,
    val = 11,
    isVertical = true;

  direction = isVertical ? 'vertical' : 'horizontal';  

  ctxMain.fillStyle = rgb(250,250,210);  // LightYellow
  ctxMain.fillRect(0, 0, canvasMain.width, canvasMain.height);
  
  // Draw the scrollbar itself. 
  ctxScrollbar.fillStyle = '#d9d9d9';  // Used color picker to get this color from original applet.
  //ctxScrollbar.clearRect(0, 0, canvasScrollbar.width, canvasScrollbar.height);
  ctxScrollbar.fillRect(0, 0, width, height);
  //console.log(width);

  // Draw the scrollbar slider.
  ctxScrollbar.fillStyle = '#aeaeae';  // Used color picker to get this color from original applet.
  if (direction === 'vertical') {
    var scrollbarPosition = ((height - scrollbarSize) / max) * val;
    ctxScrollbar.fillRect(0, scrollbarPosition, width, scrollbarSize);
  } else {
    var scrollbarPosition = ((width - scrollbarSize) / max) * val;
    ctxScrollbar.fillRect(scrollbarPosition, 0, scrollbarSize, height);
  }
}

drawScrollbar();

document.getElementById("scrollbarvert").addEventListener("click", function(e) {
  var rect = e.target.getBoundingClientRect();
  var x = e.clientX - rect.left; //x position within the element.
  var y = e.clientY - rect.top;  //y position within the element.

  console.log("canvas here with event " + e + " with x " + x + " and y " + y);
});
</script>
</body>
</html>
